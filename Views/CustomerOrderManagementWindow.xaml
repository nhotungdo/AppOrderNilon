<Window x:Class="AppOrderNilon.Views.CustomerOrderManagementWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Quản lý đơn hàng - Khách hàng" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#2196F3" 
                Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Quản lý đơn hàng" 
                               FontSize="24" 
                               FontWeight="Bold" 
                               Foreground="White"/>
                    <TextBlock Text="Xem và quản lý đơn hàng của bạn" 
                               FontSize="14" 
                               Foreground="White" 
                               Opacity="0.9"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <TextBlock Text="Khách hàng: " 
                               Foreground="White" 
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="txtCustomerName" 
                               Text="Khách hàng" 
                               Foreground="White" 
                               FontWeight="Bold" 
                               VerticalAlignment="Center"/>
                    <Button Content="Quay lại" 
                            Background="Transparent" 
                            Foreground="White" 
                            BorderBrush="White" 
                            BorderThickness="1"
                            Padding="15,5"
                            Margin="20,0,0,0"
                            Click="Back_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Border Grid.Row="1" 
                Background="White" 
                Margin="20" 
                CornerRadius="10" 
                Padding="20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Search and Filter -->
                <Border Grid.Row="0" 
                        Background="#F8F9FA" 
                        CornerRadius="5" 
                        Padding="15" 
                        Margin="0,0,0,15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="txtSearch" 
                                 Grid.Column="0"
                                 Margin="0,0,10,0"
                                 TextChanged="Search_TextChanged">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Style.Triggers>
                                        <Trigger Property="Text" Value="">
                                            <Setter Property="Background">
                                                <Setter.Value>
                                                    <VisualBrush AlignmentX="Left" AlignmentY="Center" Stretch="None">
                                                        <VisualBrush.Visual>
                                                            <TextBlock Text="Tìm kiếm đơn hàng..." 
                                                                       Foreground="Gray" 
                                                                       FontStyle="Italic"/>
                                                        </VisualBrush.Visual>
                                                    </VisualBrush>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBox.Style>
                        </TextBox>

                        <ComboBox x:Name="cmbStatusFilter" 
                                  Grid.Column="1"
                                  Margin="0,0,10,0"
                                  SelectionChanged="StatusFilter_SelectionChanged">
                            <ComboBoxItem Content="Tất cả trạng thái"/>
                            <ComboBoxItem Content="Chờ xử lý"/>
                            <ComboBoxItem Content="Đang xử lý"/>
                            <ComboBoxItem Content="Đã giao"/>
                            <ComboBoxItem Content="Hoàn thành"/>
                            <ComboBoxItem Content="Đã hủy"/>
                        </ComboBox>

                        <Button Content="Làm mới" 
                                Grid.Column="2"
                                Background="#2196F3"
                                Foreground="White"
                                Height="35"
                                Padding="15,5"
                                Margin="0,0,10,0"
                                Click="Refresh_Click"/>

                        <Button Content="Xem chi tiết" 
                                Grid.Column="3"
                                Background="#4CAF50"
                                Foreground="White"
                                Height="35"
                                Padding="15,5"
                                Click="ViewDetails_Click"/>
                    </Grid>
                </Border>

                <!-- Orders List -->
                <Border Grid.Row="1" 
                        Background="White" 
                        CornerRadius="5" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Danh sách đơn hàng" 
                                   FontSize="18" 
                                   FontWeight="Bold" 
                                   Margin="15,15,15,10"/>

                        <DataGrid x:Name="dgOrders" 
                                  Grid.Row="1"
                                  AutoGenerateColumns="False" 
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  IsReadOnly="True"
                                  GridLinesVisibility="Horizontal"
                                  HeadersVisibility="Column"
                                  RowHeaderWidth="0"
                                  SelectionMode="Single"
                                  SelectionChanged="Orders_SelectionChanged">
                            
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Mã đơn hàng" 
                                                    Binding="{Binding OrderId}" 
                                                    Width="120"/>
                                <DataGridTextColumn Header="Ngày đặt" 
                                                    Binding="{Binding OrderDate, StringFormat=dd/MM/yyyy}" 
                                                    Width="120"/>
                                <DataGridTextColumn Header="Tổng tiền" 
                                                    Binding="{Binding TotalAmount, StringFormat=N0 VNĐ}" 
                                                    Width="150"/>
                                <DataGridTextColumn Header="Trạng thái" 
                                                    Binding="{Binding Status}" 
                                                    Width="120"/>
                                <DataGridTemplateColumn Header="Hành động" Width="200">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="Chi tiết" 
                                                        Background="#2196F3"
                                                        Foreground="White"
                                                        Height="25" 
                                                        Padding="8,2"
                                                        Margin="0,0,5,0"
                                                        Click="ViewOrderDetails_Click"/>
                                                <Button Content="Hủy" 
                                                        Background="#F44336"
                                                        Foreground="White"
                                                        Height="25" 
                                                        Padding="8,2"
                                                        Click="CancelOrder_Click"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window> 